const L=document.querySelector(".js-form"),S=document.querySelector(".js-search-input"),C=document.querySelector(".js-search-btn"),I=document.querySelector(".js-reset-btn"),l=document.querySelector(".js-favs-section"),v=document.querySelector(".js-search-section"),r=document.querySelector(".js-cards-container"),i=document.querySelector(".js-favs-container"),_="https://api.jikan.moe/v4/anime?q=",p="https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png",h="https://via.placeholder.com/210x295/ffffff/666666/?text=",u=JSON.parse(localStorage.getItem("favorites"));let d=[],n=[];const g=s=>{for(const e of n)if(parseInt(s.id)===e.mal_id){const t=n.findIndex(a=>parseInt(s.id)===a.mal_id);n.splice(t,1),m(),n.length===0?localStorage.removeItem("favorites"):localStorage.setItem("favorites",JSON.stringify(n))}},j=(s,e)=>{for(const t of e)s.id===t.id&&t.classList.toggle("card__selected")},y=()=>{const s=document.querySelectorAll(".js-fav-card"),e=document.querySelectorAll(".js-anime-card");for(const t of s)for(const a of e)t.id===a.id&&a.classList.add("card__selected")},E=s=>{const t=s.currentTarget.parentNode,a=document.querySelectorAll(".js-anime-card");g(t),j(t,a),n.length===0&&localStorage.removeItem("favorites")},m=()=>{i.innerHTML="";for(const e of n){const t=document.createElement("div");i.appendChild(t),t.classList.add("favs__card","js-fav-card"),t.setAttribute("id",e.mal_id);const a=document.createElement("img"),c=document.createElement("p"),o=document.createTextNode(e.title),f=document.createElement("i");t.appendChild(a),a.setAttribute("alt",e.title),e.images.webp.image_url!==p?a.setAttribute("src",e.images.webp.image_url):a.setAttribute("src",`${h}${e.title}`),t.appendChild(c),c.appendChild(o),t.appendChild(f),f.classList.add("fa-regular","fa-circle-xmark","js-fav-card")}const s=document.querySelectorAll(".js-fav-card");for(const e of s)e.addEventListener("click",E)};u!==null&&(n=u,m(),l.classList.remove("hidden"));const A=s=>{const e=s.currentTarget;e.classList.toggle("card__selected");const t=d.find(c=>parseInt(e.id)===c.mal_id);n.findIndex(c=>parseInt(e.id)===c.mal_id)===-1?n.push(t):g(e),m(),n.length===0?localStorage.removeItem("favorites"):localStorage.setItem("favorites",JSON.stringify(n))},b=()=>{r.innerHTML="";for(const e of d){const t=document.createElement("div");r.appendChild(t),t.setAttribute("id",e.mal_id),t.classList.add("js-anime-card","result__cards");const a=document.createElement("img");t.appendChild(a),a.setAttribute("alt",e.title),e.images.webp.image_url!==p?a.setAttribute("src",e.images.webp.image_url):a.setAttribute("src",`${h}${e.title}`);const c=document.createElement("p"),o=document.createTextNode(e.title);t.appendChild(c),c.appendChild(o)}v.classList.remove("hidden"),l.classList.remove("hidden"),y();const s=document.querySelectorAll(".js-anime-card");for(const e of s)e.addEventListener("click",A)},q=s=>{s.preventDefault();const e=S.value.toLowerCase(),t=`${_}${e}`;fetch(t).then(a=>a.json()).then(a=>{d=a.data,b()})};C.addEventListener("click",q);const F=s=>{s.preventDefault(),L.reset(),r.innerHTML="",i.innerHTML="",l.classList.add("hidden"),v.classList.add("hidden"),localStorage.removeItem("favorites")};I.addEventListener("click",F);
//# sourceMappingURL=main.js.map
