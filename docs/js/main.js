const L=document.querySelector(".js-form"),C=document.querySelector(".js-search-input"),I=document.querySelector(".js-search-btn"),_=document.querySelector(".js-reset-btn"),j=document.querySelector(".js-delete-favs"),d=document.querySelector(".js-favs-section"),v=document.querySelector(".js-search-section"),i=document.querySelector(".js-cards-container"),l=document.querySelector(".js-favs-container"),y="https://api.jikan.moe/v4/anime?q=",p="https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png",h="https://via.placeholder.com/210x295/ffffff/666666/?text=",u=JSON.parse(localStorage.getItem("favorites"));let m=[],n=[];const g=s=>{for(const t of n)if(parseInt(s.id)===t.mal_id){const e=n.findIndex(a=>parseInt(s.id)===a.mal_id);n.splice(e,1),r(n),n.length===0?localStorage.removeItem("favorites"):localStorage.setItem("favorites",JSON.stringify(n))}},A=(s,t)=>{for(const e of t)s.id===e.id&&e.classList.toggle("card__selected")},E=()=>{const s=document.querySelectorAll(".js-fav-card"),t=document.querySelectorAll(".js-anime-card");for(const e of s)for(const a of t)e.id===a.id&&a.classList.add("card__selected")},q=s=>{const e=s.currentTarget.parentNode,a=document.querySelectorAll(".js-anime-card");g(e),A(e,a),n.length===0&&localStorage.removeItem("favorites")},r=s=>{l.innerHTML="";for(const e of s){const a=document.createElement("div");l.appendChild(a),a.classList.add("favs__card","js-fav-card"),a.setAttribute("id",e.mal_id);const c=document.createElement("img"),o=document.createElement("p"),S=document.createTextNode(e.title),f=document.createElement("i");a.appendChild(c),c.setAttribute("alt",e.title),e.images.webp.image_url!==p?c.setAttribute("src",e.images.webp.image_url):c.setAttribute("src",`${h}${e.title}`),a.appendChild(o),o.appendChild(S),a.appendChild(f),f.classList.add("fa-regular","fa-circle-xmark","js-fav-card")}const t=document.querySelectorAll(".js-fav-card");for(const e of t)e.addEventListener("click",q)};u!==null&&(n=u,r(n),d.classList.remove("hidden"));const b=s=>{const t=s.currentTarget;t.classList.toggle("card__selected");const e=m.find(c=>parseInt(t.id)===c.mal_id);n.findIndex(c=>parseInt(t.id)===c.mal_id)===-1?n.push(e):g(t),r(n),n.length===0?localStorage.removeItem("favorites"):localStorage.setItem("favorites",JSON.stringify(n))},F=()=>{i.innerHTML="";for(const t of m){const e=document.createElement("div");i.appendChild(e),e.setAttribute("id",t.mal_id),e.classList.add("js-anime-card","result__cards");const a=document.createElement("img");e.appendChild(a),a.setAttribute("alt",t.title),t.images.webp.image_url!==p?a.setAttribute("src",t.images.webp.image_url):a.setAttribute("src",`${h}${t.title}`);const c=document.createElement("p"),o=document.createTextNode(t.title);e.appendChild(c),c.appendChild(o)}v.classList.remove("hidden"),d.classList.remove("hidden"),E();const s=document.querySelectorAll(".js-anime-card");for(const t of s)t.addEventListener("click",b)},k=s=>{s.preventDefault();const t=C.value.toLowerCase(),e=`${y}${t}`;fetch(e).then(a=>a.json()).then(a=>{m=a.data,F()})};I.addEventListener("click",k);const T=s=>{s.preventDefault(),L.reset(),i.innerHTML="",l.innerHTML="",d.classList.add("hidden"),v.classList.add("hidden"),localStorage.removeItem("favorites")};_.addEventListener("click",T);const x=()=>{n=[],r(n);const s=document.querySelectorAll(".js-anime-card");for(const t of s)t.classList.remove("card__selected");localStorage.removeItem("favorites")};j.addEventListener("click",x);
//# sourceMappingURL=main.js.map
